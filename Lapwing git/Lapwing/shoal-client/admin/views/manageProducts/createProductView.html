<div class="content-wrap"><div id="main-content" class="container">
    <div id="left-column" class="col-sm-12" ng-hide="!showTabOne">
       <uib-tabset active="active">
	        <uib-tab heading="Manage Products" index="0">
            <button id="product-add-2" class="btn btn-success pull-right" style="margin-left: 10px !important;" value="Add" ng-click="vm.addNewProduct()" >
                Add Product
            </button>
            <button type="button" class="btn btn-success pull-right" ng-click="vm.openUploadProductsModal()" >
                Upload Bulk Products
            </button>
			<table
				class="table table-striped table-responsive table-hover table-headings">
				<thead>
					<tr>
						<th>Product Name</th>
						<th>Product Code</th>
						<th>Supplier Name</th>
						<th>Stock Available</th>
						<th>Offer Start Date</th>
						<th>Offer End Date</th>
						<th class="text-center">Action</th>
					</tr>
				</thead>

				<tbody>
					<tr ng-repeat="product in vm.products">
						<td>{{product.name}}</td>
						<td>{{product.code}}</td>
						<th>{{product.vendorName}}</th>
						<td>{{product.stock}}</td>
						<td>{{product.offerStartDate | date:'shortDate'}}</td>
						<td>{{product.offerEndDate | date:'shortDate'}}</td>
						<td class="text-center">
				        	<a class="btn btn-success btn-xs fa fa-pencil-square-o" aria-hidden="true" style="cursor:pointer" ng-click="vm.editProduct(product)"></a>
				            <a class="btn btn-success btn-xs fa fa-trash-o" aria-hidden="true" style="cursor:pointer" ng-click="vm.deleteProduct(product)"></a>
        				</td>
					</tr>
				</tbody>
			</table>
			</uib-tab>
	        <uib-tab heading="Manage Categories" index="1">
                <div ng-hide="!vm.categoryForm.isSuccess" class="alert alert-success">{{vm.categoryForm.successMessage}}</div>
                <div ng-hide="!vm.categoryForm.isError" class="alert alert-danger">{{vm.categoryForm.errorMessage}}</div>
	         <button id="registrations-confirm-2" class="btn btn-success pull-right" value="Add" ng-click="vm.addCategory()" >
	                                        Add Category
	            </button>
	            <table id="list-of-registered-users" class="table table-striped table-responsive table-hover table-headings">
	            <thead>
	                <tr>
	                    <th>Category</th>
	                    <th>Parent Category</th>
                        <th class="text-center">Action</th> 
	                </tr>
	            </thead>
	            <tbody>
	                <tr ng-repeat="category in vm.productCategoryList">
	                    <td>{{category.name}}</td>
	                    <td>{{category.parent.name}}</td>
                        <td class="text-center">
                            <a class="btn btn-success btn-xs fa fa-pencil-square-o" aria-hidden="true" style="cursor:pointer" ng-click="vm.editCategory(category)"></a>
                            <a class="btn btn-success btn-xs fa fa-trash-o" aria-hidden="true" style="cursor:pointer" ng-click="vm.deleteCategory(category.id)"></a>
                        </td>
	                </tr>
	                </tbody>
	            </table>
	        </uib-tab>
   	</uib-tabset>
    </div>
    <div id="left-column" class="col-sm-12" ng-hide="!showTabTwo">
                <div class="content-wrap"><div id="main-content" class="container">
                <div id="left-column" class="col-sm-12">
                    <div class="row">
                      <div class="col-xs-8" >
                       <h3 ng-if="vm.isAdd">Create a new product</h3>
                       <h3 ng-if="!vm.isAdd">Edit product</h3>
                      </div>
                    <div class="col-xs-4" >
                        <button type="button" class="btn btn-success pull-right" ng-click="vm.backToMainPage()" >
                            Back
                        </button>
                    </div>
                    </div>
                    <div class="row">
                        <form id="create-product-form" class="form-horizontal" role="form" name="vm.createProductForm" sho-mark-required-fields ng-submit="vm.productFormSave()">
                            <fieldset>
                                <legend>Product Details</legend>
                                <div class="form-group" sho-highlight-errors>
                                    <label class="control-label col-xs-3">Product Name:</label>
                                    <div class="col-xs-9" ><input type="text" class="form-control input-sm" name="product_name" maxlength="65" ng-maxlength="64"
                                    data-ng-pattern="/^[a-zA-Z0-9-.\s]*$/" ng-model="vm.productForm.name" required/>
                                        <div class="help-block" ng-messages="vm.createProductForm['product_name'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the Product name that will be shown to customers.</small>
                                            </p>
                                        <p data-ng-message="maxlength" class="text-danger">
                                        <small>Maximun product name length required is 64 characters
                                            only.</small>
                                       </p>
                                        <p data-ng-message="pattern" class="text-danger">
                                            <small>Enter Valid product name using A-Z,a-z,0-9,°,,,-,.
                                                characters only.</small>
                                        </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors>
                                    <label class="control-label col-xs-3">Code:</label>
                                    <div class="col-xs-9" ><input type="text" ng-trim="false" class="form-control input-sm" name="product_code"
                                    ng-trim="false" sho-not-allowed-space-field="vm.productForm.code" maxlength="65" ng-maxlength="64" ng-model="vm.productForm.code" ng-pattern="/^[a-zA-Z0-9]*$/" required/>
                                        <div class="help-block" ng-messages="vm.createProductForm['product_code'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the unique product code.</small>
                                            </p>
                                            <p ng-message="pattern" class="text-danger">
                                                <small>Product code must contains Alphabets and numeric only.</small>
                                            </p>
                                            <p ng-message="spacenotallow" class="text-danger">
                                                <small>Please enter the unique product code without space.</small>
                                            </p>
                                            <p data-ng-message="maxlength" class="text-danger">
                                            <small>Maximun product code length required is 64 characters
                                                only.</small>
                                           </p>

                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors ng-if="vm.isAdd">
                                    <label class="control-label col-xs-3">Category:</label>
                                    <div class="col-xs-9">
                                        <div sho-select-categories bind="vm.productForm.mainCategory" name="product_category" ></div>
                                        <div class="help-block" ng-messages="vm.createProductForm['product_category'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the main product category that this product belongs to.</small>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors ng-if="vm.isAdd">
                                    <label class="control-label col-xs-3">Principal:</label>
                                    <div class="col-xs-9" >
                                        <div sho-select-vendors bind="vm.productForm.vendorName" ng-init="vm.productForm.vendorName" name="product_vendorName" ></div>
                                        <div class="help-block" ng-messages="vm.createProductForm['product_vendorName'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the name of the principal that is selling this product.</small>
                                            </p>
                                        </div>
                                        <div class="col-xs-10  col-xs-offset-2">
                                            <div class="pull-right">
                                                <button type="button" id="add-spec-button" ng-click="vm.openVendorModal()" >
                                                    <span class="fa fa-plus fa-2"></span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors ng-if="!vm.isAdd">
                                    <label class="control-label col-xs-3">Category:</label>
                                    <div class="col-xs-9">
                                        <label style="padding-top: 8px;">
                                            {{vm.productForm.mainCategory}}
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors ng-if="!vm.isAdd">
                                    <label class="control-label col-xs-3">Principal:</label>
                                    <div class="col-xs-9" >
                                        <label style="padding-top: 8px;">
                                            {{vm.productForm.vendorName}}
                                        </label>
                                        <div class="col-xs-10  col-xs-offset-2">
                                            <div class="pull-right">
                                                <button type="button" id="add-spec-button" ng-click="vm.openVendorModal()" >
                                                    <span class="fa fa-plus fa-2"></span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors ng-if="vm.isAdd">
                                    <label class="control-label col-xs-3">Vat Rate:</label>
                                    <div class="col-xs-9" >
                                        <div sho-select-vat-rate-add bind="vm.productForm.vatRate" name="product_vatRate" ></div>
                                        <div class="help-block" ng-messages="vm.createProductForm['product_vatRate'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the VAT rate for this product</small>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors ng-if="!vm.isAdd">
                                    <label class="control-label col-xs-3">Vat Rate:</label>
                                    <div class="col-xs-9" >
                                        <div sho-select-vat-rate bind="vm.productForm.vatRate" name="product_vatRate" ></div>
                                        <div class="help-block" ng-messages="vm.createProductForm['product_vatRate'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the VAT rate for this product</small>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors>
                                    <label class="control-label col-xs-3">Description:</label>
                                    <div class="col-xs-9"><textarea class="form-control input-sm" name="product_description" maxlength="4097" 
                                                                 ng-maxlength="4096" data-ng-pattern="/^[a-zA-Z0-9-.,°\s]*$/" ng-model="vm.productForm.description" required ></textarea>
                                        <div class="help-block" ng-messages="vm.createProductForm['product_description'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the marketing information for this product.</small>
                                            </p>
                                            <p data-ng-message="maxlength" class="text-danger">
                                            <small>Maximun description length required is 4096 characters
                                                only.</small>
                                            </p>
                                            <p data-ng-message="pattern" class="text-danger">
                                                <small>Enter Valid description using A-Z,a-z,0-9,°,,,-,.
                                                    characters only.</small>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors>
                                    <label class="control-label col-xs-3">Review:</label>
                                    <div class="col-xs-9"><textarea class="form-control input-sm" name="product_review" maxlength="4097"
                                                                  ng-maxlength="4096" data-ng-pattern="/^[a-zA-Z0-9-.,°\s]*$/" ng-model="vm.productForm.review" required ></textarea>
                                        <div class="help-block" ng-messages="vm.createProductForm['product_review'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the Review this product.</small>
                                            </p>
                                            <p data-ng-message="maxlength" class="text-danger">
                                            <small>Maximun Review Details length required is 4096 characters
                                                only.</small>
                                            </p>
                                            <p data-ng-message="pattern" class="text-danger">
                                                <small>Enter Valid Review Details using A-Z,a-z,0-9,°,,,-,.
                                                    characters only.</small>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors>
                                    <label class="control-label col-xs-3">Return Policy:</label>
                                    <div class="col-xs-9"><textarea class="form-control input-sm" name="product_suitability" maxlength="4097"
                                                                  ng-maxlength="4096" data-ng-pattern="/^[a-zA-Z0-9-.,°\s]*$/" ng-model="vm.productForm.suitability" required ></textarea>
                                        <div class="help-block" ng-messages="vm.createProductForm['product_suitability'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the Return Policy for this product.</small>
                                            </p>
                                            <p data-ng-message="maxlength" class="text-danger">
                                            <small>Maximun Return Policy length required is 4096 characters
                                                only.</small>
                                            </p>
                                            <p data-ng-message="pattern" class="text-danger">
                                                <small>Enter Valid Return Policy using A-Z,a-z,0-9,°,,,-,.
                                                    characters only.</small>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors>
                                    <label class="control-label col-xs-3">Stock Level Information:</label>
                                    <div class="col-xs-9">
                                    <input type="number" class="form-control input-sm" name="stock"
                                    ng-model="vm.productForm.stock" required min="1" max="9223372036854775807" ng-init="vm.productForm.stock = 1"/>
                                        <div class="help-block" ng-messages="vm.createProductForm['stock'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the stock level information for this product.</small>
                                            </p>
                                            <p ng-message="min" class="text-danger">
                                                <small>Stock Level Information must be minimum 1.</small>
                                             </p>
                                            <p ng-message="max" class="text-danger">
                                                <small>Stock Level Information must be less than the 9223372036854775808.</small>
                                             </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors> 
                                    <label class="control-label col-xs-3">Maximum Purchase Limit:</label>
                                    <div class="col-xs-9">
                                    <input type="number" class="form-control input-sm" name="maximumPurchaseLimit"
                                    ng-model="vm.productForm.maximumPurchaseLimit" required min="1" max="{{ vm.productForm.stock }}" ng-init="vm.productForm.maximumPurchaseLimit = 1"/>
                                        <div class="help-block" ng-messages="vm.createProductForm['maximumPurchaseLimit'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the Maximum Purchase Limit for this product.</small>
                                            </p>
                                            <p ng-message="min" class="text-danger">
                                                        <small>Maximum Purchase Limit must be minimum 1.</small>
                                             </p>
                                            <p ng-message="max" class="text-danger">
                                                        <small>Maximum Purchase Limit must be less than the Stock Availability.</small>
                                             </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group" sho-highlight-errors>
                                    <label class="control-label col-xs-3">Terms and Conditions:</label>
                                    <div class="col-xs-9"><textarea class="form-control input-sm" name="product_termsAndConditions"
                                                                 data-ng-pattern="/^[a-zA-Z0-9-.,°\s]*$/" maxlength="4097"  ng-maxlength="4096" ng-model="vm.productForm.termsAndConditions" required ></textarea>
                                        <div class="help-block" ng-messages="vm.createProductForm['product_termsAndConditions'].$error">
                                            <p ng-message="required" class="text-danger">
                                                <small>Please enter the terms and conditions for this product.</small>
                                            </p>
                                            <p data-ng-message="maxlength" class="text-danger">
                                            <small>Maximun terms and Conditions  length required is 4096 characters
                                                only.</small>
                                            </p>
                                            <p data-ng-message="pattern" class="text-danger">
                                                <small>Enter Valid terms and Conditions  using A-Z,a-z,0-9,°,,,-,.
                                                    characters only.</small>
                                                </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-xs-3">Product Specifications:</label>
                                    <div class="table-responsive">
                                        <table class="product-specification table table-condensed">
                                            <colgroup>
                                                <col class="row-name" span="1" />
                                                <col class="row-description" span="1" />
                                                <col class="row-action-button" span="1" />
                                            </colgroup>
                                            <thead>
                                                <th>Type</th>
                                                <th>Description</th>
                                            </thead>
                                            <tr ng-repeat="spec in vm.productForm.specifications">
                                                <td class="form-group" sho-highlight-errors>
                                                    <input title="name" type="text" class="form-control input-sm" name="spec_name_{{$index}}"
                                                           data-ng-pattern="/^[a-zA-Z0-9-.,°\s]*$/" ng-model="spec.name" maxlength="65"  ng-maxlength="64" required />
                                                    <div class="help-block" ng-messages="vm.createProductForm['spec_name_' + $index].$error">
                                                        <p ng-message="required" class="text-danger">
                                                            <small>Please enter a name for this specification.</small>
                                                        </p>
                                                        <p data-ng-message="maxlength" class="text-danger">
                                                        <small>Maximun specification  length required is 64 characters
                                                            only.</small>
                                                        </p>
                                                        <p data-ng-message="pattern" class="text-danger">
                                                            <small>Enter Valid specification using A-Z,a-z,0-9,°,,,-,.
                                                                characters only.</small>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td class="form-group" sho-highlight-errors>
                                                    <input title="description" type="text" class="form-control input-sm" name="spec_description_{{$index}}"
                                                           data-ng-pattern="/^[a-zA-Z0-9-.,°\s]*$/" ng-model="spec.description" maxlength="513"  ng-maxlength="512" required/>
                                                    <div class="help-block" ng-messages="vm.createProductForm['spec_description_' + $index].$error">
                                                        <p ng-message="required" class="text-danger">
                                                            <small>Please enter a description for this specification.</small>
                                                        </p>
                                                         <p data-ng-message="maxlength" class="text-danger">
                                                        <small>Maximun description  length required is 512 characters
                                                            only.</small>
                                                        </p>
                                                        <p data-ng-message="pattern" class="text-danger">
                                                            <small>Enter Valid description using A-Z,a-z,0-9,°,,,-,.
                                                                characters only.</small>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td>
                                                    <button type="button" ng-if="!$first" ng-click="vm.productForm.specifications.removeItem(spec)"><span class="fa fa-minus fa-2"></span></button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>&nbsp;</td>
                                                <td>&nbsp;</td>
                                                <td>
                                                    <button type="button" id="add-spec-button" ng-click="vm.productForm.specifications.addItem()"><span class="fa fa-plus fa-2"></span></button>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-xs-3">Product Images:</label>
                                    <div class="table-responsive">
                                        <table class="product-specification table table-condensed">
                                            <colgroup>
                                                <col class="row-name" span="1" />
                                                <col class="row-url" span="1" />
                                                <col class="row-action-button" span="1" />
                                            </colgroup>
                                            <thead>
                                            <th>Url</th>
                                            <th>Description</th>
                                            </thead>
                                            <tr ng-repeat="image in vm.productForm.images">
                                                <td class="form-group" sho-highlight-errors>
                                                    <input title="url" type="text" class="form-control input-sm" name="image_url_{{$index}}"
                                                           ng-model="image.url" required/>
                                                    <div class="help-block" ng-messages="vm.createProductForm['image_url_' + $index].$error">
                                                        <p ng-message="required" class="text-danger">
                                                            <small>Please enter a valid url for this image.</small>
                                                        </p>
                                                    </div>

                                                </td>
                                                <td class="form-group" sho-highlight-errors>
                                                    <input title="description" type="text" class="form-control input-sm" name="image_description_{{$index}}"
                                                           ng-model="image.description" maxlength="513"   ng-maxlength="512" data-ng-pattern="/^[a-zA-Z0-9-.,°\s]*$/" required/>
                                                    <div class="help-block" ng-messages="vm.createProductForm['image_description_' + $index].$error">
                                                        <p ng-message="required" class="text-danger">
                                                            <small>Please enter a description for this specification.</small>
                                                        </p>
                                                        <p data-ng-message="maxlength" class="text-danger">
                                                        <small>Maximun description  length required is 512 characters
                                                            only.</small>
                                                        </p>
                                                        <p data-ng-message="pattern" class="text-danger">
                                                            <small>Enter Valid description using A-Z,a-z,0-9,°,,,-,.
                                                                characters only.</small>
                                                        </p>
                                                    </div>
                                                </td>
                                                <td>
                                                    <button type="button" ng-if="!$first" ng-click="vm.productForm.images.removeItem(image)"><span class="fa fa-minus fa-2"></span></button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>&nbsp;</td>
                                                <td>&nbsp;</td>
                                                <td>
                                                    <button type="button" id="add-image-button" ng-click="vm.productForm.images.addItem()"  ng-hide="vm.productForm.images.length > 2"><span class="fa fa-plus fa-2"></span></button>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset>    
                                 <legend>Email Notification</legend>
                           <div class="form-group" sho-highlight-errors>
                                <label class="control-label col-xs-3">Process-Notification:</label>
                            <div class="col-xs-1"><input type="checkbox" class = "form-control input-sm" name="product_processNotification" ng-model="vm.productForm.processNotification" />
                            </div>
                        </div>
                        <div class="form-group" sho-highlight-errors>
                                <label class="control-label col-xs-3">Submit-Notification:</label>
                            <div class="col-xs-1"><input type="checkbox" class = "form-control input-sm" name="product_submitNotification" ng-model="vm.productForm.submitNotification" />
                            </div>
                        </div>                              
                            </fieldset>
                            <fieldset>
                                <legend>Offer Details</legend>
                            </fieldset>
                            <div class="form-group" sho-highlight-errors ng-if="vm.isAdd">
                                <label class="control-label col-xs-3">Offer Dates:</label>

                                <div class="col-xs-4" id="start-date-picker-wrapper" >
                                    <p class="input-group">
                                        <input type="text" class="form-control" name="offer_start"
                                                               uib-datepicker-popup="dd/MM/yyyy"
                                                               ng-model="vm.productForm.offerStartDate"
                                                               is-open="vm.startDatePicker.opened"
                                                               datepicker-options="vm.startDatePicker.options"
                                                               min-date="vm.startDatePicker.minDate"
                                                               ng-required="true"
                                                               sho-min-date="vm.startDatePicker.minDate"
                                                               placeholder="dd/mm/yyyy"

                                        />
                                    <span class="input-group-btn">
                                            <button type="button" id="start-date-picker-button" class="btn btn-default" ng-click="vm.openStartDatePicker($event)">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </p>
                                    <div class="help-block" ng-messages="vm.createProductForm['offer_start'].$error">
                                        <p ng-message="required" class="text-danger">
                                            <small>Please enter the start date for this offer.</small>
                                        </p>
                                        <p ng-message="minDate" class="text-danger">
                                            <small>Please enter today's date or later.</small>
                                        </p>
                                    </div>
                                </div>

                                <div class="col-xs-4" id="end-date-picker-wrapper">
                                    <p class="input-group">
                                        <input type="text" class="form-control" name="offer_end"
                                                                 uib-datepicker-popup="dd/MM/yyyy"
                                                                 ng-model="vm.productForm.offerEndDate"
                                                                 is-open="vm.endDatePicker.opened"
                                                                 datepicker-options="vm.endDatePicker.options"
                                                                 min-date="vm.endDatePicker.minDate"
                                                                 sho-min-date="vm.endDatePicker.minDate"
                                                                 ng-required="true"
                                                                 placeholder="dd/mm/yyyy"/>
                                        <span class="input-group-btn">
                                            <button type="button" id="end-date-picker-button" class="btn btn-default" ng-click="vm.openEndDatePicker($event)">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </p>
                                    <div class="help-block" ng-messages="vm.createProductForm['offer_end'].$error">
                                        <p ng-message="required" class="text-danger">
                                            <small>Please enter the inclusive last day of the offer.</small>
                                        </p>
                                        <p ng-message="minDate" class="text-danger">
                                            <small>The end date must be after the start date.</small>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" sho-highlight-errors ng-if="!vm.isAdd">
                                <label class="control-label col-xs-3">Offer Dates:</label>
<!--                                 <div class="col-xs-4">
                                        <label type="text" class="form-control">
                                            {{vm.productForm.offerStartDate | date: "dd/MM/yyyy"}}
                                        </label>
                                    </div> -->

                                <div class="col-xs-4" id="start-date-picker-wrapper" >
                                    <p class="input-group">
                                        <input type="text" class="form-control" name="offer_start"
                                                               uib-datepicker-popup="dd/MM/yyyy"
                                                               ng-model="vm.productForm.offerStartDate"
                                                               is-open="vm.startDatePicker.opened"
                                                               datepicker-options="vm.startDatePicker.options"
                                                               ng-required="true"
                                                               placeholder="dd/mm/yyyy"/>
                                    <span class="input-group-btn">
                                            <button type="button" id="start-date-picker-button" class="btn btn-default" ng-click="vm.openStartDatePicker($event)">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </p>
                                    <div class="help-block" ng-messages="vm.createProductForm['offer_start'].$error">
                                        <p ng-message="required" class="text-danger">
                                            <small>Please enter the start date for this offer.</small>
                                        </p>
                                    </div>
                                </div>

                                <div class="col-xs-4" id="end-date-picker-wrapper">
                                    <p class="input-group">
                                        <input type="text" class="form-control" name="offer_end"
                                                                 uib-datepicker-popup="dd/MM/yyyy"
                                                                 ng-model="vm.productForm.offerEndDate"
                                                                 is-open="vm.endDatePicker.opened"
                                                                 datepicker-options="vm.endDatePicker.options"
                                                                 min-date="vm.endDatePicker.minDate"
                                                                 sho-min-date="vm.endDatePicker.minDate"
                                                                 ng-required="true"
                                                                 placeholder="dd/mm/yyyy"/>
                                        <span class="input-group-btn">
                                            <button type="button" id="end-date-picker-button" class="btn btn-default" ng-click="vm.openEndDatePicker($event)">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </p>
                                    <div class="help-block" ng-messages="vm.createProductForm['offer_end'].$error">
                                        <p ng-message="required" class="text-danger">
                                            <small>Please enter the inclusive last day of the offer.</small>
                                        </p>
                                        <p ng-message="minDate" class="text-danger">
                                            <small>The end date must be after the start date.</small>
                                        </p>
                                    </div>
                                </div>
                                <!-- <div class="col-xs-4">
                                    <label type="text" class="form-control">
                                        {{vm.productForm.offerEndDate | date: "dd/MM/yyyy"}}
                                    </label>
                                </div> -->
                            </div>
                            <div ng-form name="vm.priceBandsForm" class="form-group" novalidate>
                                <label class="control-label col-xs-3">Price Brackets:</label>
                                <div class="table-responsive">
                                    <table class="table table-condensed">
                                        <colgroup>
                                            <col class="row-unbounded-check" span="1" />
                                            <col class="row-min-vol" span="1" />
                                            <col class="row-max-vol" span="1" />
                                            <col class="row-buyer-price" span="1" />
                                            <col class="row-vendor-price" span="1" />
                                            <col class="row-shoal-margin" span="1" />
                                            <col class="row-dist-margin" span="1" />
                                            <col class="row-action-button" span="1" />
                                        </colgroup>
                                        <thead>
                                            <th>Unbounded</th>
                                            <th>Volume Start</th>
                                            <th>Volume End</th>
                                            <th>Buyer Price (£)</th>
                                            <th>Vendor Price (£)</th>
                                            <th>Silverwing Margin (£)</th>
                                            <th>Distributor Margin (£)</th>
                                        </thead>
                                        <tr ng-repeat="band in vm.productForm.priceBands">
                                            <td class="form-group">
                                                <input ng-show="$last" type="checkbox" class="form-control input-sm" ng-model="band.unbounded" name="band_unbounded_max_{{$index}}" ng-disabled="!vm.isAdd"/>
                                            </td>
                                            <td class="form-group" sho-highlight-errors>
                                                <input type="number" class="form-control input-sm" name="band_start_{{$index}}"
                                                       ng-model="band.minVolume" required ng-max="{{ band.maxVolume }}" readonly />
                                            </td>
                                            <td class="form-group" sho-highlight-errors>
                                                <input type="number" class="form-control input-sm" name="band_end_{{$index}}"
                                                       ng-model="band.maxVolume" ng-required="!band.unbounded" min="{{ band.minVolume }}" ng-readonly="!$last || !vm.isAdd"/>

                                                <div class="help-block" ng-messages="vm.priceBandsForm['band_end_' + $index].$error">
                                                    <p ng-message="required" class="text-danger">
                                                        <small>Please enter the end volume for this price bracket.</small>
                                                    </p>
                                                    <p ng-message="min" class="text-danger">
                                                        <small>End volume must be more than the start volume.</small>
                                                    </p>
                                                </div>
                                            </td>
                                            <td class="form-group" sho-highlight-errors>
                                                <input type="number" class="form-control input-sm" name="buyer_price_{{$index}}"
                                                       ng-model="band.buyerPrice" required min="0" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="0.01" ng-readonly="!vm.isAdd"/>

                                                <div class="help-block" ng-messages="vm.priceBandsForm['buyer_price_' + $index].$error">
                                                    <p ng-message="required" class="text-danger">
                                                        <small>Please enter the buyer price for this price bracket.</small>
                                                    </p>
                                                    <p ng-message="min" class="text-danger">
                                                        <small>Buyer price must be more than zero.</small>
                                                    </p>
                                                    <p ng-message="pattern" class="text-danger">
                                                        <small>Buyer price must be contains maximum 2 decimal points.</small>
                                                    </p>
                                                </div>
                                            </td>
                                            <td class="form-group" sho-highlight-errors>
                                                <input type="number" class="form-control input-sm" name="vendor_price_{{$index}}"
                                                       ng-model="band.vendorPrice" required min="band.buyerPrice" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="0.01" ng-readonly="!vm.isAdd"/>

                                                <div class="help-block" ng-messages="vm.priceBandsForm['vendor_price_' + $index].$error">
                                                    <p ng-message="required" class="text-danger">
                                                        <small>Please enter the vendor price for this price bracket.</small>
                                                    </p>
                                                    <p ng-message="min" class="text-danger">
                                                        <small>Vendor price must be more than {{band.buyerPrice}}.</small>
                                                    </p>
                                                    <p ng-message="pattern" class="text-danger">
                                                        <small>Vendor price must be contains maximum 2 decimal points.</small>
                                                    </p>
                                                </div>
                                            </td>
                                            <td class="form-group" sho-highlight-errors>
                                                <input type="number" class="form-control input-sm" name="shoal_margin_{{$index}}"
                                                      ng-model="band.shoalMargin" required min="0" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="0.01" ng-readonly="!vm.isAdd"/>

                                                <div class="help-block" ng-messages="vm.priceBandsForm['shoal_margin_' + $index].$error">
                                                    <p ng-message="required" class="text-danger">
                                                        <small>Please enter the margin for this price bracket.</small>
                                                    </p>
                                                    <p ng-message="min" class="text-danger">
                                                        <small>margin must be more than zero.</small>
                                                    </p>
                                                    <p ng-message="max" class="text-danger">
                                                        <small>margin must be less then buyer price and vendor price differnt.</small>
                                                    </p>
                                                    <p ng-message="pattern" class="text-danger">
                                                        <small>Margin must be contains maximum 2 decimal points.</small>
                                                    </p>
                                                </div>
                                            </td>
                                            <td class="form-group" sho-highlight-errors>
                                                <input type="number" class="form-control input-sm" ng-model="band.distributorMargin" name="distributor_margin_{{$index}}" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="0.01" required min="{{band.buyerPrice - band.vendorPrice - band.shoalMargin | number : 2 }}" max="{{band.buyerPrice - band.vendorPrice - band.shoalMargin | number : 2 }}" ng-readonly="!vm.isAdd"/>
                                                <div class="help-block" ng-messages="vm.priceBandsForm['distributor_margin_' + $index].$error">
                                                    <p ng-message="required" class="text-danger">
                                                        <small>Please enter the distributor margin for this price bracket.</small>
                                                    </p>
                                                    <p ng-message="min" class="text-danger">
                                                        <small>Sum of distributor margin and Silverwing margin must be equal to total profit. Distributor margin must be {{band.buyerPrice - band.vendorPrice - band.shoalMargin | number : 2 }}.</small>
                                                    </p>
                                                    <p ng-message="max" class="text-danger">
                                                        <small>Sum of distributor margin and Silverwing margin must be equal to total profit. Distributor margin must be {{band.buyerPrice - band.vendorPrice - band.shoalMargin | number : 2 }}.</small>
                                                    </p>
                                                    <p ng-message="pattern" class="text-danger">
                                                        <small>Distributor margin must be contains maximum 2 decimal points.</small>
                                                    </p>
                                                </div>
                                            </td>
                                            <td>
                                                <button type="button" ng-show="$last && $index >0" ng-click="vm.productForm.priceBands.removeItem(band)" ng-if="vm.isAdd"><span class="fa fa-minus fa-2"></span></button>
                                            </td>
                                        </tr>
                                        <tr ng-show="vm.productForm.priceBands[vm.productForm.priceBands.length-1].unbounded === false">
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>
                                                <button type="button" id="add-band-button" sho-validate-on-click="vm.productForm.priceBands.addItem()" ng-if="vm.isAdd" sho-prevent-double-click><span class="fa fa-plus fa-2"></span></button>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div class="alert alert-danger" ng-show="vm.productForm.status.isError">
                                {{ vm.productForm.status.errorMessage }}
                                <br />
                            </div>
                            <div id="product-saved-block" class="alert alert-success" ng-show="vm.productForm.status.isSaved && vm.isAdd">
                                <span>Product {{ vm.productForm.code }}</span> has been created successfully.
                                <br />
                            </div>
                            <div id="product-saved-block" class="alert alert-success" ng-show="vm.productForm.status.isSaved && !vm.isAdd">
                                <span>Product {{ vm.productForm.code }}</span> has been edited successfully.
                                <br />
                            </div>
                            <div class="help-block">
                                <button type="submit" sho-validate-on-click class="btn btn-success pull-right" ng-disabled="!vm.createProductForm.$valid">
                                    <span ng-if="!vm.productForm.isSaved">{{vm.addButtonText}} </span>
                                </button>
                                <br />
                            </div>
                            <!--<pre>{{vm.createProductForm | json: 4}}</pre>-->
                        </form>
                    </div>
                </div>
    </div>
</div>
</div>